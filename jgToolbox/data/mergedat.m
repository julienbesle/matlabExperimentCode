function mergedat(file,folder)% look for file and folder namesif ~exist('file','var');	[file,folder] = uigetfile('*.dat','Choose First File');endif ~exist('folder','var')	folder = pwd;endif file	% for mutiple files	cd(folder)	currfiles = dir('*.dat');	[selectfiles,ok] = dolistdlg(currfiles,'name','Select All Files To Merge:',[160 300],'multiple');	if ~ok		selectfiles = {file};	end	% data file	period=findstr(file,'.');	if isempty(period)==0,		file=file(1:period-1);	end	[newfile,newfolder] = uiputfile([file,'sum.dat'],'Save New File As');	% tags in the data file	% trial = 1; sequence = 2; response = 3;	% correct = 4; stimlevel = 5; condition = 6;	% randnstate1 = 7; randnstate2 = 8;	if newfile		nfid = fopen([newfolder,newfile],'w+');		for i = 1:size(selectfiles,2)					data = readdata(selectfiles{i},folder);			data = data(:,1:condition);			fid = fopen([folder,selectfiles{i}],'r');			while feof(fid)==0,				line = fgets(fid);				if (line(1)=='%')					fprintf(nfid,['%s',line]);				end				end			fclose(fid);			for j = 1:size(data,1)				fprintf(nfid,'%g\t',data(j,:)); 				fprintf(nfid,'\n');			end			end			fclose(nfid);	end	edit([newfolder,newfile]);	endreturn;	