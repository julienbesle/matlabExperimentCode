function dat2igor(file,folder,newfile,newfolder)% function dat2igor(file,folder)%% converts a data file of the format of "readdata"% to an igor text file. text variables are discarded.%% October 26 1998  JMGce file folder newfile newfolder;if ~exist('file','var');	[file,folder] = uigetfile('*.*','Choose File');endif file			data = readdata(file,folder);	if isempty(data)		clear data;	end	vars = whos;	period = findstr('.',file);	if ~isempty(period)		defarg('newfile',[file(1:period-1),'.igor']);	end	if newfile		if exist('data','var')			numcols = size(data,2);			colnums = [1:numcols];		end		numvars = length(vars);		for i = 1:numvars			currname{1} = vars(i,1).name;			eval(['vals = ',currname{1},'(:);']);			if ~ischar(vals) & ~strcmp(currname,'data')				if exist('data','var') & length(vals) == 1					loc = find(colnums==vals);					if isempty(loc)						saveigor(newfile,folder,vals,currname);					else						varnames{loc} = currname{1};					end				else					saveigor(newfile,folder,vals,currname);				end			end		end		if exist('varnames','var') 			saveigor(newfile,folder,data,varnames);		end		endendreturn				