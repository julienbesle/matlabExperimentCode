function doeff% function doeff%% add efficiencies to already existing threshold file.% 1st prompt asks for files with human thresholds.% 2nd prompt asks for file with ideal observer thresholds.% ideal thresholds and human efficiencies are appended % to the human data files.%% April 18 2000  JMG% get human files[humanfiles,humanfolders] = selectmanyfiles('*.psy','Select Next Set of Human Files (cancel to stop)');% quit?if isempty(humanfiles),	return;end% get ideal file[idealfile,idealfolder] = selectfiles('*.psy','Select Ideal File','single');% quit?if isempty(idealfile),	return;end% store ideal dataidealdata = readdata(idealfile{1},idealfolder);idealthreshmean = threshmean;idealthreshstd = threshstd;idealslope = slope;idealslopestd = slopestd;% loop through all human filesfor i = 1:size(humanfiles,2),	% compute efficiencies	humandata = readdata(humanfiles{i},humanfolders{i});	efficiencythresh = idealthreshmean./threshmean;	efficiencythreshstd = efficiencythresh.*(sqrt((idealthreshstd./idealthreshmean).^2 + (threshstd./threshmean).^2)); 	efficiencyslope = idealslope./slope;	efficiencyslopestd = efficiencyslope.*(sqrt( (idealslopestd./idealslope).^2 + (slopestd./slope).^2)); 		% append to human file	[fid] = fopen([humanfolders{i},humanfiles{i}],'a+');	% ideal thresholds, slope	savecommand(fid,vars2str(idealthreshmean));	savecommand(fid,vars2str(idealthreshstd));	savecommand(fid,vars2str(idealslope));	savecommand(fid,vars2str(idealslopestd));	% human efficiencies	savecommand(fid,vars2str(efficiencythresh));	savecommand(fid,vars2str(efficiencythreshstd));	savecommand(fid,vars2str(efficiencyslope));	savecommand(fid,vars2str(efficiencyslopestd));	% close	fclose(fid);		end	return