function doeff(stimlabel,plottitle,conditionlabel,hfile,hfolder,ifile,ifolder)% function doeff(stimlabel,plottitle,conditionlabel,hfile,hfolder,ifile,ifolder)% look for file and folder namesif ~exist('hfile','var');	[hfile,hfolder] = uigetfile('*.psy','Human File');endif ~exist('hfolder','var')	hfolder = pwd;end% look for file and folder namesif ~exist('ifile','var');	[ifile,ifolder] = uigetfile('*.psy','Ideal File');endif ~exist('ifolder','var')	ifolder = pwd;end% deafultsdefarg('stimlabel','Stimulus Level');defarg('plottitle',upper(hfile(1:findstr('.',hfile)-1)));defarg('conditionlabel','Condition');if all(ifile) & all(hfile)		% get huamn data 	data = readdata(hfile,hfolder);	% get vars	hthresh = thresh;	hconditions = conditions;		% get ideal data 	data = readdata(ifile,ifolder);	% get vars	ithresh = thresh;	iconditions = conditions;		% plot thresholds	threshhandle = figure;	leg=putlegend;	low = min(ithresh)/2;	high = max(hthresh)*2;	axis([iconditions(1),iconditions(2),low,high]);	hhandle = loglog(hconditions,hthresh,'r*-');	hold on;	ihandle = loglog(iconditions,ithresh,'b*:');	leg=putlegend(leg,hhandle,hfile(1:3));	leg=putlegend(leg,ihandle,'Ideal');	xlabel(conditionlabel)	ylabel(['Threshold ',stimlabel]);	title(plottitle);	putlegend(leg,2);	% plot efficiencies	ehandle = figure;	leg=putlegend;	efficiency = (ithresh./hthresh)*100;	low = min(efficiency)/2;	high = max(efficiency)*2;	axis([hconditions(1),hconditions(2),low,high]);	effhandle = loglog(hconditions,efficiency,'r*-');	hold on;	leg=putlegend(leg,effhandle,hfile(1:3));	xlabel(conditionlabel)	ylabel('Efficiency (%)');	title(plottitle);	putlegend(leg,2);		% write data to file.	period=findstr(hfile,'.');	if isempty(period)==0,		file=hfile(1:period-1);	end	[file,folder] = uiputfile([file,'.eff'],'Save Results As');	if file				% matlab style		fwid = fopen([folder,file],'w+');		savedatetime(fwid);		savecommand(fwid,['efficiency = [',num2str(efficiency),'];'])		fclose(fwid);			% igor style		period=findstr(hfile,'.');		if isempty(period)==0,			file=file(1:period-1);		end		file = [file,'.igor'];		varmatrix = [(conditions*100)',hthresh',ithresh',efficiency'];		varnames = {'pcpixels',[hfile(1:3),'thresh'],'idealthresh',[hfile(1:3),'efficiency']};		saveigor(file,folder,varmatrix,varnames);		edit([folder,file]);			endend			