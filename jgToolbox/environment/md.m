function md(file,dirname,location)% function md(name,location)%% Use with jg: md <dirname> <location>% General use: md <masterfile> <dirname> <location>%% Make a new directory named 'dirname' in a given location.% if no location is passed, the current directory is used.% Uses applescript, so it is very slow. It would be better to make% a mex file version.%% July 7, 1998  JMG U of T Vision Labmd = pwd;if nargin < 1	file = 'jg.m';ends=findstr('.m',file);eval([file(1:s-1),' env;']);found = 0;fiderror = 1;if exist('location')	% get the paths from the shortcut	casestr = '			case ''';	gostr = ''', godir = ''';	fid = fopen(file,'r+');	str = location;	if fid ~= -1		while ~feof(fid) & ~found			temp = fgetl(fid);			if length(temp) >= length([casestr,str])				if temp(1:length([casestr,str])) == [casestr,str] 					location = temp(length([casestr,str,gostr])+1:end-2);					cd(location);							found = 1;							end			end		end	else		printstr('There was a problem opening the main file.');		printstr('Make sure it is not already open (e.g., being edited).');		fiderror = 0;		cd(md);	end	fclose(fid);else	cd(md);	found = 1;end% rename the file if path was foundif found	if ~exist([pwd,dirname],'dir')		amkdir(dirname,pwd);	else		printstr('Folder already exists.');	endelseif fiderror	printstr('Path not found.');endprintstr(md);return