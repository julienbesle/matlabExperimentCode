function ap(file,str,newpath)% function ap(file,str,newpath)%% Use with jg.m: jg ap <shortcutname> <path>% General Use:  ap <masterfile> <shortcutname> <path>%% Appends paths to the 'jg' function ( or richard's 'go' function).% it looks for the path indicator string '% appended paths' and appends% the a path to the file, with the passed string as the shortcut. If no% path is passed, it uses the current working path.% the parameter FILE allows the user to specify the function being% modified.%% June 1998  JMG  U of T Vision Lab% the path indicator stringpathstr = '			% appended paths';casestr = '			case ''';% default to current directory if not suppliedif nargin < 3	newpath = pwd;end% choose the switch file 'jg.m' if no file is passedif nargin < 1	file = 'jg.m';ends=findstr('.m',file);eval([file(1:s-1),' env;']);% first, check to see if the path already existsfid = fopen(file,'r+');found = 0;env = 0;if fid ~= -1	if length(str) == length('env')		if str == 'env'			printstr('"env" is a reserved shortcut.');			found = 1;			env = 1;		end			else		while ~feof(fid) & ~found			temp = fgetl(fid);			if length(temp) >= length([casestr,str])+1				if strcmp(temp(1:length([casestr,str])+1),[casestr,str,''''])  					found = 1;				end			end		end	end	fclose(fid);	% append the new path if a shortcut name was passed	if ~nargin | found			if ~nargin			printstr('Not enough paramters passed.');		elseif ~env			printstr('Shortcut already exists.');		end			else		fid = fopen(file,'r+');		found = 0;		while ~feof(fid) & ~found			temp = fgetl(fid);			if length(temp)==length(pathstr)				if strcmp(temp,pathstr)					newstr = ['\t\t\tcase ''',str,''', godir = ''',newpath,''';\n'];					found = 1;					pos = ftell(fid);				end			end		end		if found			[temp,items] = fread(fid,inf,'schar');			fseek(fid,pos,-1);			fprintf(fid,newstr);			items = fwrite(fid,temp,'schar');			else			printstr('No path indicator found.');		end		fclose(fid);	endelse	printstr('There was a problem opening the main file.');	printstr('Make sure it is not already open (e.g., being edited).');end% clear functions, change directories to the appended path, and print itcfcd(newpath);printstr(newpath); return