function rn(file,oldname,newname,location)% function rn(oldname,newname,location)%% Use with jg: jg rn <oldname> <newname> <location>% General use: rn <masterfile> <oldname> <newname> <location>%% rename a file using the 'jg.m.' function% oldname is the file to be changed, newname the new file% name, and location the shortcut for the folder that% contains the file. if no location is passed, the current% directory is used. %% N.B.: Sometimes the name change does not show up % immediately with a directory command (e.g., 'ls') in Matlab.%% July 3, 1998  JMG U of T Vision Labmd = pwd;if nargin < 1	file = 'jg.m';ends=findstr('.m',file);eval([file(1:s-1),' env;']);found = 0;fiderror = 1;if exist('location')	% get the paths from the shortcut	casestr = '			case ''';	gostr = ''', godir = ''';	fid = fopen(file,'r+');	str = location;	if fid ~= -1		envfound = 0;		if length(str) == length('env')			if str == 'env'				found=1;				envfound = 1;			end		end		if envfound == 0			while ~feof(fid) & ~found				temp = fgetl(fid);				if length(temp) >= length([casestr,str])					if temp(1:length([casestr,str])) == [casestr,str] 						location = temp(length([casestr,str,gostr])+1:end-2);						cd(location);								found = 1;								end				end			end		end		fclose(fid);	else		printstr('There was a problem opening the main file.');		printstr('Make sure it is not already open (e.g., being edited).');		fiderror = 0;		cd(md);	end	else	cd(md);	found = 1;end% rename the file if path was foundif found	if exist(oldname,'file')		arename(oldname,newname);	else		printstr('File not found.');	endelseif fiderror	printstr('Path not found.');endprintstr(md);return