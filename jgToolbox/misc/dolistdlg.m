function [outlist,ok] = dolistdlg(instruct,Field,Prompt,Sz,Mode)% function [outlist,ok] = dolistdlg(instruct,Field,Prompt,Sz,Mode)%% This function makes a dialog box that allows the user to select one% or mutiple items from the set. INSTRUCT is a struct. FIELD is the % field that is to be selected from in the struct. If FIELD is not% passed, the first field in the struct is chosen. PROMPT is the% the prompt to the user to appear at the top of the box. If not% passed, PROMPT is given a default generic string. MODE is% an optional argument that allows the user to select either one% ('single') or more than one item ('multiple') in the list. .The% default is 'single'. Sz is the [width height] of listbox in pixels;% defaults to [160 300]. Returns the selected item(s) in the cell array% OUTLIST. Also returns parameter OK, which is 1 if something was% selected, 0 if cancel was chosen. %% March 17 1998  JMG U of T Vision Lab.% Check for vars and set defaults.if ~exist('Field','var')	Names = fieldnames(instruct);	Field = Names{1};enddefarg('Prompt','Select From The Following:');defarg('Mode','single');defarg('Sz',[160 300]);% Now do the dialog box.eval(['str = {instruct.',Field,'};']);[s,ok] = listdlg('PromptString',Prompt,'SelectionMode',Mode,'ListString',str,'ListSize',Sz);% Make the cell array to send back.outlist = cell(1,length(s));for i =1:length(s)	outlist(i) = str(s(i));endreturn;