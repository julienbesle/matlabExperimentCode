function [s] = getddf(file,folder)% function [s] = getddf(file,folder)%% gets calibration data from a file. loads a calibration% matrix and a set of coefficients describing the% relationship between rgb combinations and their combined% luminances.%% June 22, 1996	  J Gold	P J Bennett A B Sekuler 	University of Toronto Vision Lab   % July 18, 1998:  JMG cleaned it up; added structures% July 23, 1998:  made it compatible with new format from the calibration routine.%				  old format can be read by 'getoldddf'.% Open the file and assign an id. md = pwd;if ~exist('folder','var');	folder = pwd;end% read in datacalmatrix = readdata(file,folder);% find average luminancelavergb = [160 160 160];loc = find(calmatrix(:,r) == lavergb(1) & calmatrix(:,g)==lavergb(2) & calmatrix(:,b)==lavergb(3));lave = calmatrix(loc,end);P = [calmatrix(end,r),calmatrix(1,r),round((calmatrix(end,r)+calmatrix(1,r))/2)];L = [calmatrix(end,end),calmatrix(1,end),lave];cmax = (calmatrix(end,end)-lave)/lave;% stuff the parameters and data into a structures=struct('calmatrix',calmatrix,'pmaxminave',P,'lmaxminave',L,'cmax',cmax,'ABKG',coeffs,'rcoeffs',rcoeffs,'gcoeffs',gcoeffs,'bcoeffs',bcoeffs);return