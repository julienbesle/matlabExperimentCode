function fout = waitbar(x,name)%WAITBAR Display wait bar.%   H = WAITBAR(X,'title') creates and displays a wait bar of %   fractional length X.  The handle to the waitbar figure is%   returned in H.  X should be between 0 and 1.  Each %   subsequent call to waitbar, WAITBAR(X), extends the length %   of the bar to the new position X.%%   WAITBAR is typically used inside a FOR loop that performs a %   lengthy computation.  A sample usage is shown below:%%       h = waitbar(0,'Please wait...');%       for i=1:100,%           % computation here %%           waitbar(i/100)%       end%       close(h)%   Clay M. Thompson 11-9-92%   Copyright (c) 1984-97 by The MathWorks, Inc.%   $Revision: 1.10 $  $Date: 1997/04/08 07:00:19 $% 1-Sep-98 -- percent completed written to xlabel (RFM)x = max(0,min(100*x,100));switch nargincase 1,  % waitbar(x)    update   f = findobj(allchild(0),'flat','Tag','TMWWaitbar');   p = findobj(f,'Type','patch');   l = findobj(f,'Type','line');   if isempty(f) | isempty(p) | isempty(l),       error('Couldn''t find waitbar handles.');    end   xpatch = get(p,'XData');   xpatch = [xpatch(2) x x xpatch(2)];   set(p,'XData',xpatch')   xline = get(l,'XData');   set(l,'XData',xline);case 2,  % waitbar(x,name)  initialize   oldRootUnits = get(0,'Units');   set(0, 'Units', 'points');   pos = get(0,'ScreenSize');   pointsPerPixel = 72/get(0,'ScreenPixelsPerInch');      width = 360 * pointsPerPixel;   height = 75 * pointsPerPixel;   pos = [pos(3)/2-width/2 pos(4)/2-height/2 width height];   f = figure(...           'Units', 'points', ...           'Position', pos, ...           'Resize','off', ...           'CreateFcn','', ...           'NumberTitle','off', ...           'IntegerHandle','off', ...           'MenuBar', 'none', ...           'Tag','TMWWaitbar');   colormap([]);      h = axes('XLim',[0 100],'YLim',[0 1]);   title(name);   set(h, ...           'Box','on', ...           'Position',[.05 .3 .9 .2],...           'XTickMode','manual',...           'YTickMode','manual',...           'XTick',[],...           'YTick',[],...           'XTickLabelMode','manual',...           'XTickLabel',[],...           'YTickLabelMode','manual',...           'YTickLabel',[]);   xpatch = [0 x x 0];   ypatch = [0 0 1 1];   xline = [100 0 0 100 100];   yline = [0 0 1 1 0];   p = patch(xpatch,ypatch,'r','EdgeColor','r','EraseMode','none');   l = line(xline,yline,'EraseMode','none');   set(l,'Color',get(gca,'XColor'));   set(f,'HandleVisibility','callback');      set(0, 'Units', oldRootUnits);      end  % casedrawnow;if nargout==1,  fout = f;end