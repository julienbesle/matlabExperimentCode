function dofaces(initials,rotation,polarity)% function dofaces(initials,rotation,polarity)%% shell that runs the face identification experiment.% finds contrast thresholds according to method% of constant stimuli at arbitrary number of noise levels.% can also choose any number of stimuli to present.% % includes option to repeat trials to get consistency% measure (see 'numsessions' parameter below).% % user selects stimuli with a from a selection window.% '0' key skips initial adaptation.% clicking mouse in top left corner instead of a response% exists the program. data is saved after each trial.%% consecutive sessions are saved in separate files, and % the file names are numbered appropriately if the files% are kept within matlab's search path.%% Nov 6 1999 JMG U of T Vision Lab% defaults for stimuli and userdefarg('initials','jmg');defarg('rotation',0);defarg('polarity','pos');% covertif ischar(rotation)	rotation = str2num(rotation);end% noise levelsthemin = 1e-4;themax = .0625;numshiftnz = 0;numnoise = 5;noiselevels = logspaceshift(themin,themax,numnoise,numshiftnz);basethresh = [7.5e-6 7.5e-6 2.5e-5 5e-5 1e-4];% stimulus levelsif strcmp(initials,'jmg')	if strcmp(polarity,'neg') | rotation		approxthresh = basethresh*5.25;	else		approxthresh = basethresh*3.5;	endelseif strcmp(initials,'ajr')	if strcmp(polarity,'neg') | rotation 		approxthresh = basethresh*5.25;	else		approxthresh = basethresh*4;	endelseif strcmp(initials,'amc')	if strcmp(polarity,'neg') | rotation 		approxthresh = basethresh*5.25;	else		approxthresh = basethresh*4;	endelse	if strcmp(polarity,'neg') | rotation 		approxthresh = basethresh*5.25;	else		approxthresh = basethresh*4;	endend% constantsnumsessions	= 1;		% number of repeated sessions (for consistency)numstimlevels = 5;		% number of stimulus levels in psychometric functionnumshift = 0;			% shifts the stimulus levels up or down in log spacelogrange = 2.5;			% the range of stimlus levels around threshold estimatemaxtrials = 31;			% number of trials/stimulus levelmainscrs = 1;			% screen to display stimulinumstim = 10;			% # of stimli in the set. showstim = [1:numstim]; % stimuli to be shownfilename = faceeffnz(initials,mainscrs,maxtrials,numstim,noiselevels,approxthresh,numsessions,numstimlevels,numshift,logrange,showstim,rotation,polarity);% dopsymet(filename);