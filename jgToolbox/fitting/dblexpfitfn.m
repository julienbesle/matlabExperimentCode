function [ params ] = dblexpfitfn( data, init )% function [ params ] = dblexpfitfn( data, init )%% fits a double exponential to data. data are independant and dependant% data, stored in a 2 column matrix. init are the initial values for% the parameters. third col is optional weights.%% May 1998  JMG U of T Vision Labdefarg('init',[90 120 .75 350 65]);sz = size(data);if sz(2) == 2	data = [data,ones(sz(1),1)];end% data(:,3) = (data(:,3)).^(-1);% functionerrfn = inline('sum( ( ( (x(1) + x(2).*exp(-x(3).*P1(:,1)) + x(4).*exp(-x(5).*P1(:,1))) - P1(:,2)).^2)./P1(:,3))',1);options=foptions;options(14)=25000;params = fmins(errfn,init,options,[],data);return