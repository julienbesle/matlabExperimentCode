function trialsrc = mkudtr( levels, criterion, id )% MKUDTR  Make a UDTR trial source.%% trialsrc = mkudtr( levels, criterion, id )%% valid criteria are 50%, 71%, 74%, 77%, 84%% 28-Jan-98 -- created (RFM)% set default argumentsdefarg('criterion','84%');defarg('id',-1);% each row is [ criterion correctmax incorrectmax ]udtrtab = { ...	'50%',  1,  1  ;	'71%',  2,  1  ;	'74%',  5,  2  ;	'77%',  3,  1  ;	'84%',  4,  1  };% find column in udtrtabr=0;for i=1:size(udtrtab,1),	if strcmp(udtrtab{i,1},criterion),		r=i;		break	endendif r==0,	error(sprintf('Invalid criterion level ''%s''',criterion));endtrialsrc.type='udtr';            % typetrialsrc.levels=levels(:)';      % stimulus levelstrialsrc.criterion=criterion;    % desired threshold leveltrialsrc.id=id;                  % trial source idtrialsrc.leveli=round(size(trialsrc.levels,2)/2); % index of current stimulus leveltrialsrc.correct=0;                        % correct trialstrialsrc.incorrect=0;                      % incorrect trialstrialsrc.correctmax=udtrtab{r,2};trialsrc.incorrectmax=udtrtab{r,3};trialsrc.trial=0;return