function [outimage,nc]=nbnoise(lowf,highf,o1,o2,inimage,showImage);dim=size(inimage,1);dim2=size(inimage,2);if (dim ~= dim2) return; end;ft=fftshift(fft2(inimage));amp=abs(ft);phase=angle(ft);r=size(amp,1);c=size(amp,2);dc=[round(r/2)+1,round(c/2)+1];dcAmp=amp(dc(1),dc(2));ofilter2d=ofilter(o1,o2,dim,showImage);filter2d=bpfilter(lowf,highf,dim);size(ofilter2d)size(filter2d)filter2d=filter2d.*ofilter2d;nc=length(find(filter2d~=0));amp = amp.*filter2d;ft = amp.*exp(sqrt(-1)*phase);outimage=real(ifft2(fftshift(ft)));if (showImage ~= 0)	figure(1);imshow(scale(filter2d));set(1,'Name','filter')	figure(2);imshow(scale(inimage));set(2,'Name','input')	figure(3);imshow(scale(outimage));set(3,'Name','output')end;