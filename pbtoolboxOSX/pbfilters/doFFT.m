dim=256;f=32;w=round(f/2);test=rand(dim,dim);%	test = MakeCosImage(0,12,dim,dim);%	test = (test+1)/2;%	test = (test/2)+0.5;ft=fftshift(fft2(test));amp=abs(ft);phase=angle(ft);r=size(amp,1);c=size(amp,2);dc=[round(r/2)+1,round(c/2)+1];xfilter=zeros(1,c);x1=dc(1)-f;x2=dc(1)+f;xfilter(1,x1:x2)=xfilter(1,x1:x2)+1.0;yfilter=zeros(r,1);y1=dc(2)-f;y2=dc(2)+f;yfilter(y1:y2,1)=yfilter(y1:y2,1)+1.0;filter2d=yfilter*xfilter;amp = amp.*filter2d;ft = amp.*exp(sqrt(-1)*phase);ftest=real(ifft2(ft));figure(1);imshow(amp);figure(2);imshow(test);figure(3);imshow(abs(ftest));