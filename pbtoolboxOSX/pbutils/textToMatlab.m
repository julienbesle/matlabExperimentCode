function textimage=textToMatlab(rows,cols,polarity,text,font,fontsize,fontstyle)% % function textimage=textToMatlab(rows,cols,polarity,text,font,fontsize,fontstyle)% % Writes text into a rows x cols matlab matrix.% Polarity: if set to 1, then the text is white (one) & background is black (zero), otherwise%			the background is white (one) and the text is black (zero).% Font: is a text string (e.g., 'Helvetica').% Fontsize: point size.% Fontstyle: Default is 1%if nargin==6	fontstyle=1;end;background=1;textcolor=0;stimrect=setrect(0,0,cols,rows);tmpwindow=screen(-1,'OpenOffscreenWindow',background,stimrect);[oldfont,oldsz,oldstyle]=settext(tmpwindow,font,fontsize,fontstyle);ytext=round(rows/2)+round(fontsize/3);[nx,ny] = centertext(tmpwindow,stimrect,text,ytext,textcolor,fontsize); % writetextimage=screen(tmpwindow,'GetImage');textimage=double(textimage);if (polarity==1)	textimage=-1*(textimage-1);end;screen(tmpwindow,'Close');return;