function timedbreak( winPtr, winRect, seconds, quitkeys)% function key = timedbreak( winPtr, winRect, seconds quitkeys)%%     - <winPtr> is window where message is shown during pause%     - <winRect> is the rect for winPtr%	  - <pausekeys> list of keypresses that will cause a pause (default='0')%     - <postsec> is time to pause after key press in seconds (default='1')% 19-FEB-03 - created (PJB)	if nargin<2, 		return % need both parameters, so return if they are not provided	end			% set default arguments	defarg('seconds',60);	defarg('quitkeys','0');			% check seconds to make sure that it is reasonable	maxsec=60*3;	if (seconds<0)		disp('ERROR IN timedbreak: negative timedbreak duration!');		return;	end;		if (seconds>maxsec)		disp(['WARNING (timedbreak): timedbreak duration has been truncated to ',num2str(maxsec),' secs.']);	end;			s=getsecs;	quittime=s+seconds;	flushevents('keyDown');	pleasequit=0;	while (pleasequit~=1)&(s<quittime)	% pause		s=getsecs;		[newx,newy] = centertext(winPtr,winRect,['Take a break... Experiment will resume in ',num2str(round(quittime-s)),' secs'],128,1,24);		if charavail			key=getchar;			if ismember(key,quitkeys)					pleasequit=1;			end;	% if ismember		end;	% if charavail		pause(1);		[newx,newy] = centertext(winPtr,winRect,['Take a break... Experiment will resume in ',num2str(round(quittime-s)),' secs'],128,0,24);	end	% while			pause(2);return