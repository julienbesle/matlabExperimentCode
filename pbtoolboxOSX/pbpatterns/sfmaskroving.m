function	latency=sfmaskroving%%%%nr=256;lpc=1;hpratio=1.5;lpmax=floor(nr/(2*hpratio));b=0.8;cvar=0.015;c=0.2;f=16;o=0;ni=200;	% # of images in movie% lpinc=(lpmax/lpc)/ni;% mf=0:(ni-1);mf=mf*lpinc;lpinc=log10(lpmax/lpc)/ni;lpincmf=0:(ni-1);mf=mf*lpinc;mf=log10(lpc)+mf;mf=10.^mf;mf=mf-lpc;nc=nr;vblframes=8;t0=GetSecs; t1=GetSecs;	 % Initialize GetSecs and allocate memory for t0 & t1[window,wrect]=SCREEN(0,'OpenWindow',127);stimrect=SetRect(0,0,nc,nr);	%  newRect = SetRect(left,top,right,bottom);destrect=stimrect;destrect=CenterRect(destrect,wrect);gw=gauss(nr,b);clut=makeclut(0.9);target1=grating(nr,f,c,0,o);t1=[1,1,1,1,1];t2=[2,2,2,2,2];t0=[0,0,0,0,0];tbuff=[t1,t0,t1,t0,t2,t0,t2,t0,t1,t0,t1,t0,t1,t0,t1,t0,t1,t0,t1,t0];tbuff=[tbuff,tbuff];for k0=1:ni  	offscreen(k0)=SCREEN(window,'OpenOffscreenWindow',0,stimrect); % allocate memory for offscreen windows	curlp=floor(lpc+mf(k0));	curhp=floor(curlp*hpratio);	nimage=bpnoise1d(nr,cvar,o,curlp,curhp);	if (tbuff(k0)==0)		temp=gw.*nimage;	end;	if (tbuff(k0)~=0)		temp=gw.*(nimage+target1);	end;	temp=round(127*temp+127);	pt=find(temp>254);	temp(pt)=254+zeros(1,length(pt));	pt=find(temp<0);	temp(pt)=zeros(1,length(pt));	SCREEN(offscreen(k0),'PutImage',temp);end;	err=SCREEN(window,'SetClut',clut);	oldval=screen(window,'Preference','WaitForVBLInterrupt',1);	GetSecs(t0);	if (vblframes<1) vblframes=1; end;	if (vblframes>100) vblframes=100; end; 	SCREEN('CopyWindow',offscreen(1),window,stimrect,destrect);	c=mouseclick;	alldone=0;	stim=1;	numframes=1;	stiminc=1;	while (alldone==0)  		SCREEN('CopyWindow',offscreen(stim),window,stimrect,destrect);		stim=stim+stiminc;		if (stim==ni)			stiminc=-1;		end;		if (stim==1)			stiminc=1;		end; 		SCREEN(window,'WaitVBL',vblframes);		[alldone,t1]=KbCheck;	end;	latency=t1-t0;  	SCREEN('CloseAll'); return;	