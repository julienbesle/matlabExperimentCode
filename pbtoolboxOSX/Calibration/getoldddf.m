function [s] = getoldddf(file,folder)% function [s] = getoldddf(file,folder)%% this is the old calibration file format. % use the new format (getddf).%% read calibration data. it scans for a beginning of data indicator,% gets the various parameters, then puts the data into a structure.% expects the following format:%%			X |$/LUMINANCE HEADER%			254	1	127						PMax,PMin,PAvg%			76.5692	1.64742	40.0561			LMax,LMin,LAvg%			1.34902	0.436387	0.00905805	1.473360	alpha,beta,kappa,gamma%			0.9115							max device contrast%			X |END OF HEADER%			X |$/LUMINANCE TABLE	{G,R,B,Luminance}%			2025	Number of points%			1	1	1	1.64374%			1	1	2	1.65279%			.%			.%			.%			254	254	253	76.504%			254	254	254	76.5575%			X |END OF TABLE%% June 22, 1996	  J Gold	P J Bennett A B Sekuler 	University of Toronto Vision Lab   % July 18, 1998:  JMG cleaned it up; added structures% Open the file and assign an id. if ~exist('folder','var');	folder = pwd;endfid = fopen([folder,file],'r+');NumCols = 4;							% get the parameters and datatemp = [];for i = 1:8 		if i == 2 		P = fscanf(fid,'%f',[1,3]);		% The values of Pmax, Pave and Pmin are stored in this array.	elseif i == 3 		L = fscanf(fid,'%f',[1,3]);		% The Values of Lmax, Lave, and Lmin are stored in this array.	elseif i == 4		abkg = fscanf(fid,'%f',[1,4]);	% The values of Alpha, Beta, Kappa, and Gamma.	elseif i == 5		cmax = fscanf(fid,'%f',[1,1]);	% The Maximun device of Contrast.	elseif i == 8 		sz = fscanf(fid,'%f',[1,1]);	% The number of points in the Calibration Matrix.	end	temp = fgetl(fid);	end% read in data[calmatrix,count] = fscanf(fid,'%f',[NumCols,inf]);calmatrix = calmatrix';fclose(fid);% stuff the parameters into a structures=struct('calmatrix',calmatrix,'pmaxminave',P,'lmaxminave',L,'ABKG',abkg,'cmax',cmax);return