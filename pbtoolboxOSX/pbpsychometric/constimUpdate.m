function constim=constimUpdate(constim,correct)	% update counters	ci=constim.curindex; % index to current value	constim.trialcount(ci)=constim.trialcount(ci)+1; % increment trial counter for this value	if (correct==1)		constim.numcorrect(ci)=constim.numcorrect(ci)+1;	end;	constim.trialdata(constim.curtrial,:)=[constim.curvalue,correct]; % store the data	constim.curtrial=constim.curtrial+1; % increment overall trial counter		constim.alldone=(length(find(constim.trialcount<constim.maxtrials))==0); % are we done?		if (constim.alldone==0) % if we are not finished, select values (random, without replacement) for next trial		gotone=0;		while(gotone==0)			ci=constimSelect(constim.numvalues);			if (constim.trialcount(ci)<constim.maxtrials)				gotone=1;			end; % if		end; % while	else		ci=constimSelect(constim.numvalues); % select one randomly, regardless of trial count	end; % if... else...		constim.curindex=ci;	% index to current value	constim.curvalue=constim.values(ci); % current valuereturn;	