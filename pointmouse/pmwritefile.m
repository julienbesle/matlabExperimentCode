pmmeans;cd(matdatadir);dt=dir; tmp=size(dt); kk=tmp(1);found=1;k=1;while found	matfname=[groupID,'pm','_ID',num2str(sidnum),'_N',num2str(k)];	testname=[matfname,'.mat'];	tmp=0;	for n=1:kk		tmp(n)=strcmp(lower(testname),lower(dt(n).name));	end;	found=max(tmp);	k=k+1;end;thedate=date;save(matfname); % save everythint to a mat filedisp(['workspace stored in file ',testname]);cd(mainpath);cd(textdatadir);dt=dir; tmp=size(dt); kk=tmp(1);found=1;k=1;while found	textfname=[groupID,'pm','_ID',num2str(sidnum),'_N',num2str(k)];	testname=[textfname,'.txt'];	tmp=0;	for n=1:kk		tmp(n)=strcmp(lower(testname),lower(dt(n).name));	end;	found=max(tmp);	k=k+1;end;datafilename=testname;fid=fopen(datafilename,'a');count=fprintf(fid,'%s\n',['Date: ',thedate]);count=fprintf(fid,'%s\n',['File: ',datafilename]);count=fprintf(fid,'%s\n',['Experiment: ',exptname]);count=fprintf(fid,'%s\n',['Subject ID: ',sidnum]);count=fprintf(fid,'%s\n',['Gender: ',sgender]);count=fprintf(fid,'%s\n',['Age: ',num2str(sage)]);switch lower(groupID)	case 'o'		 		count=fprintf(fid,'%s\n',['Age Group: OLD']);	case 'y' 		count=fprintf(fid,'%s\n',['Age Group: YOUNG']);	otherwise 		count=fprintf(fid,'%s\n',['Age Group: NONE SPECIFIED']);	end;count=fprintf(fid,'%s\n\n',['Comment: ',scomment]);count=fprintf(fid,'%s\n',['Calibration File: ',calfile]);count=fprintf(fid,'%s\n',['Avg Luminance: ',num2str(cal.lmaxminave(3))]);count=fprintf(fid,'%s\n',['Display Frame Rate (Hz): ',num2str(displayrate)]);count=fprintf(fid,'%s \t %s \t %s\n','Display Size (pixels): ',['Width: ',num2str(scrinfo.width)],['Height: ',num2str(scrinfo.height)]);count=fprintf(fid,'%s\n',['Display set to ',num2str(scrinfo.pixelSize),' bits per pixel']);count=fprintf(fid,'%s\n',['Spot duration (sec): ',num2str(duration)]);count=fprintf(fid,'%s\n',['Inter-trial interval (sec):',num2str(intertrial)]);count=fprintf(fid,'%s\n',['Adaptation Duration (sec): ',num2str(adaptseconds)]);count=fprintf(fid,'%s\n',['Matlab workspace stored in file: ',matfname]);count=fprintf(fid,'%s\n\n',['Mouse movement data stored in file: ',mousefilename]);if (quitflag==1)	count=fprintf(fid,'%s\n','Experiment was aborted by user.');end;count=fprintf(fid,'%s\t %s\t %s\t %s\n','isi(frames)','median(error)','avg(error)','sd(error)','SE(sd)');for kk=1:length(conds)	fprintf(fid,'%4i\t %6.2f \t %6.2f\t %6.2f\t %6.2f\n',conds(kk),mediandata(kk),avgdata(kk),sddata(kk),sesddata(kk));end;count=fprintf(fid,'\n%s\n',['after points in each condition beyond ±', num2str(zcriterion),' standard deviations are removed...']);count=fprintf(fid,'%s\t %s\t %s\t %s\n','isi(frames)','median(error)','avg(error)','sd(error)','SE(sd)');for kk=1:length(conds)	fprintf(fid,'%4i\t %6.2f \t %6.2f\t %6.2f\t %6.2f\n',conds(kk),medianclipped(kk),avgclipped(kk),sdclipped(kk),sesdclipped(kk));end;count=fprintf(fid,'\n%s\n',['DATA']);% data: col1=target direction; col2=random direction increment; col3=ISI; col4=radius; col5=response direction; col6=response distance; col7=response latencycount=fprintf(fid,'%s \t%s \t %s \t %s \t %s \t %s \t %s \t %s \t %s\n','trial','Base Direction','Radom Direction Increment','Target Direction','ISI','Target Distance','Response Direction','Response Distance','Response Latency (sec)');[numtrials,tmp0]=size(data);for kk=1:numtrials	theta=mod(data(kk,1)+data(kk,2),360);	fprintf(fid,'%4i \t %6.2f \t %6.2f \t %6.2f \t %4i \t %4i \t %6.2f \t %6.2f \t %6.3f\n',kk,data(kk,1:2),theta,data(kk,3:7)); endfclose(fid);cd(mainpath);disp(['data stored in text file ',datafilename]);