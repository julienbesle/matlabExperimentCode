function [ choice, rt ] = get2choice( winID, keys, mouseflag, freq, prompt )% GET2CHOICE  Let user make a binary choice with mouse or keyboard%% [ choice, rt ] = get2choice( winID, keys, mouseflag, freq, prompt )% 12-Jan-98 -- created (RFM)% 24-Apr-98 -- 'prompt' flag added (RFM)% set default argumentsdefarg('keys','12q');defarg('mouseflag',0);defarg('freq','');defarg('prompt',0);% mouse response needs a promptif mouseflag,	prompt=1;end% get window propertieswinRect=screen(winID,'Rect');winMid=rectmid(winRect);winSize=rectsize(winRect);% flush input deviceskeyflag=~isempty(keys);if keyflag,	flushkeyboard;endif mouseflag,	flushmouse;	setmouse(winMid(1),winMid(2),winID);	waitticks(2);	showcursor(301);end% draw prompt if requestedif prompt,	% get foreground and background colours	global sgFGColour sgBGColour;	fg = notnull( sgFGColour, 255 );	bg = notnull( sgBGColour, 0   );	% get window size and calculate box positions	xsize = round(winSize(1)/5);	ysize = round(winSize(2)/3);	box1Rect = round([ 0 0 xsize ysize ] + [ 1.4*xsize ysize 1.4*xsize ysize ]);	box1Mid  = rectmid(box1Rect);	box2Rect = round([ 0 0 xsize ysize ] + [ 2.6*xsize ysize 2.6*xsize ysize ]);	box2Mid  = rectmid(box2Rect);	% draw prompt	t1='1';	t2='2';	oldSize=screen(winID,'TextSize',30);	screen(winID,'FrameRect',fg,box1Rect);	screen(winID,'DrawText',t1,round(box1Mid(1)-screen(winID,'TextWidth',t1)/2), ...		round(box1Mid(2)+10),fg);	screen(winID,'FrameRect',fg,box2Rect);	screen(winID,'DrawText',t2,round(box2Mid(1)-screen(winID,'TextWidth',t2)/2), ...		round(box2Mid(2)+10),fg);	screen(winID,'TextSize',oldSize);end% record start timestarttime=getsecs;% beepif ~isempty(freq),	nicebeep(freq,100,1);end% wait for inputwhile 1,	% mouse	if mouseflag,		[ x y button ] = getmouse;		if button,			if inrect( [ x y ], box1Rect ),				choice=0;				break			elseif inrect( [ x y ], box2Rect ),				choice=1;				break			elseif (x==0) & (y==0),				choice=NaN;				break			end		end	end	% keyboard	if keyflag & charavail,		key=char(getchar);		if (key==keys(1)) | (key==keys(2)) | (key==keys(3)),			if key==keys(3),				choice=NaN;			else				choice=(key==keys(2));			end			break		end	endend% determine elapsed timert=getsecs-starttime;% hide mouse cursorif mouseflag,	hidecursor;end% clear promptif prompt,	cls(winID);endreturn