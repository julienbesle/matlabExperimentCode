function key = pollpause( winID, pausekeys, pausemsg, postpause )% POLLPAUSE  Show fixation point if a character is waiting on stdin%% key = pollpause( winID, pausekeys, pausemsg, postpause )%     - <winID> is window where message is shown during pause%     - <pausekeys> is list of keypresses that will cause a pause (default='0')%          - use [] for mouse only%     - <pausemsg> is message to display while pausing%          - if '', fixation point is shown%          - set to ' ' for no message or fixation point%     - <postpause> is time to pause after key press (milliseconds)% 13-Apr-98 - created (RFM)% return if no key pressedif ~charavail,	key=[];	returnend% set default argumentsdefarg('pausekeys','0');defarg('pausemsg','');defarg('postpause',500);% show fixation point if key pressedwhile charavail,	key=getchar;	if ismember(key,pausekeys),			% store copy of window		allRect=screen(winID,'Rect');		offID=screen(winID,'OpenOffscreenWindow',0,allRect);		screen('CopyWindow',winID,offID,allRect,allRect,'srcCopyQuickly');		cls(winID);				% pause		if isempty(pausemsg),			key=fixpt(winID,pausekeys,mouseflag,[]);		else			[ elapsed, key ]=pausemsg(winID,pausemsg,0,pausekeys);		end				% restore window		screen('CopyWindow',offID,winID,allRect,allRect,'srcCopyQuickly');		screen(offID,'Close');		pausems(postpause);				return			endendkey=[];return