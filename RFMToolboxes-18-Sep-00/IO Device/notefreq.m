function freq = notefreq( note )% NOTEFREQ  Return the frequency of a musical note%% freq = notefreq( note )%% The note should be passed as a string like '3c+' constructed as follows:%     - first character is the octave, with A 440 considered to be in octave 3,%       and each octave considered to stretch from C through to B%     - second character is the note name%     - third character is the accidental with '+' for a sharp and '-' for %       a flat, and no third character for a natural% determine octaveoctave=str2num(note(1));if isempty(octave),	octave=3;	base=1;else	key=note(2);	base=2;end% determine note and accidentalkey=lower(note(base));if size(note,2)>base,	accidental=note(base+1);else	accidental='';end% determine note's place in scalenotenum=find('abcdefg'==key);if isempty(notenum),	error(sprintf('Invalid key %s in note %s.',key,note));end% determine number of semitones key is from Asemitones = [ 0, 2, -9, -7, -5, -4, -2 ];dist=semitones(notenum);switch accidental,	case '',	case '+', dist=dist+1;	case '-', dist=dist-1;	otherwise		error(sprintf('Invalid accidental %s in note %s',accidental,note));enddist=dist+12*(octave-3);% calculate frequencyfreq=440*(2^(dist/12));return