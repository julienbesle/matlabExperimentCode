function newclut = setclutrange( minlum, maxlum, greyonly )% SETCLUTRANGE  Set the range of luminances covered in the clut%% newclut = setclutrange( minlum, maxlum )% 24-Aug-99 -- created (RFM)% set default argumentsdefarg('minlum',grey2lum(0));defarg('maxlum',grey2lum(255));defarg('greyonly',0);% check argumentsif minlum<grey2lum(0),	error('Minimum luminance too low');endif maxlum>grey2lum(255),	error('Maximum luminance too high');end% initialize clutglobal CLUTif ~isfield(CLUT,'mat'),	mat=zeros(256,3);end% set luminance rangeCLUT.minlum=minlum;CLUT.maxlum=maxlum;lum=linspace(minlum,maxlum,255);if greyonly,	CLUT.mat(2:end,:)=lum2grey(lum')*ones(1,3);else	CLUT.mat(2:end,:)=lum2rgb(lum);end% return clutnewclut=CLUT.mat;return